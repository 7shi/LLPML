<?xml version="1.0" encoding="utf-8" ?>
<llpml version="0.5.20070829" subsystem="WINDOWS_GUI">

<!-- window -->

<include src="win32.xml" />

<string-declare name="className">LLPML Test Window</string-declare>

<struct-declare name="wcex" type="WNDCLASSEX">
	<!-- cbSize        --> <struct-size name="WNDCLASSEX" />
	<!-- style         --> <or><int name="CS_VREDRAW" /><int name="CS_HREDRAW" /></or>
	<!-- lpfnWndProc   --> <function-ptr name="WndProc" />
	<!-- cbClsExtra    --> <int>0</int>
	<!-- cbWndExtra    --> <int>0</int>
	<!-- hInstance     --> <var name="hInstance" />
	<!-- hIcon         --> <int>0</int>
	<!-- hCursor       --> <call name="LoadCursor"><int>0</int><int name="IDC_ARROW" /></call>
	<!-- hbrBackground --> <add><int name="COLOR_WINDOW" /><int>1</int></add>
	<!-- lpszMenuName  --> <int>0</int>
	<!-- lpszClassName --> <string name="className" />
	<!-- hIconSm       --> <int>0</int>
</struct-declare>

<call name="RegisterClassEx">
	<ptr name="wcex" />
</call>

<var-declare name="hWnd">
	<call name="CreateWindowEx">
		<!-- dwExStyle    --> <int>0</int>
		<!-- lpClassName  --> <string name="className" />
		<!-- lpWindowName --> <string>テスト</string>
		<!-- dwStyle      --> <var name="WS_OVERLAPPEDWINDOW" />
		<!-- X            --> <int name="CW_USEDEFAULT" />
		<!-- Y            --> <int>0</int>
		<!-- nWidth       --> <int>256</int>
		<!-- nHeight      --> <int>256</int>
		<!-- hWndParent   --> <int>0</int>
		<!-- hMenu        --> <int>0</int>
		<!-- hInstance    --> <var name="hInstance" />
		<!-- lpParam      --> <int>0</int>
	</call>
</var-declare>

<call name="ShowWindow">
	<var name="hWnd" />
	<int name="SW_SHOWNORMAL" />
</call>

<call name="UpdateWindow">
	<var name="hWnd" />
</call>

<call name="MainLoop" />

<call name="DestroyWindow">
	<var name="hWnd" />
</call>

<function name="WndProc" type="std">
	<arg name="hwnd" />
	<arg name="msg" />
	<arg name="wParam" />
	<arg name="lParam" />
	<switch>
		<expr>
			<var name="msg" />
		</expr>
		<case><int name="WM_DESTROY" /></case>
		<block>
			<call name="PostQuitMessage">
				<int>0</int>
			</call>
			<break />
		</block>
		<block>
			<return>
				<call name="DefWindowProc">
					<var name="hwnd" />
					<var name="msg" />
					<var name="wParam" />
					<var name="lParam" />
				</call>
			</return>
		</block>
	</switch>
	<return>
		<int>0</int>
	</return>
</function>

</llpml>
