<?xml version="1.0" encoding="utf-8" ?>
<llpml version="0.20.20080514">

<title>仮想関数デストラクタ</title>

<include src="finish.xml" />
<include src="malloc.xml" />

<?llp
struct Test1
{
  function ctor
  {
    printfln("%p: %s", this, __FUNCTION__);
  }

  virtual dtor
  {
    printfln("%p: %s", this, __FUNCTION__);
  }
}

struct Test2 : Test1
{
  function ctor
  {
    printfln("%p: %s", this, __FUNCTION__);
  }

  override dtor
  {
    printfln("%p: %s", this, __FUNCTION__);
  }
}

var t = new Test1;
delete t;
println();

t = new Test2;
delete t;
println();

var tt = new Test1[3];
delete tt;
println();

int len = 2;
tt = new Test2[len];
delete tt;
?>

</llpml>
