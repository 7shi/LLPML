<?xml version="1.0" encoding="utf-8" ?>
<llpml version="0.8.20070926">

<extern name="GetModuleHandle" alias="GetModuleHandleW" module="kernel32.dll" type="std" />
<extern name="Sleep" module="kernel32.dll" type="std" />
<extern name="DefWindowProc" alias="DefWindowProcW" module="user32.dll" type="std" />
<extern name="LoadCursor" alias="LoadCursorW" module="user32.dll" type="std" />
<extern name="RegisterClassEx" alias="RegisterClassExW" module="user32.dll" type="std" />
<extern name="CreateWindowEx" alias="CreateWindowExW" module="user32.dll" type="std" />
<extern name="ShowWindow" module="user32.dll" type="std" />
<extern name="UpdateWindow" module="user32.dll" type="std" />
<extern name="DestroyWindow" module="user32.dll" type="std" />
<extern name="GetMessage" alias="GetMessageW" module="user32.dll" type="std" />
<extern name="TranslateMessage" module="user32.dll" type="std" />
<extern name="DispatchMessage" alias="DispatchMessageW" module="user32.dll" type="std" />
<extern name="PostQuitMessage" module="user32.dll" type="std" />

<int-declare name="CS_VREDRAW">1</int-declare>
<int-declare name="CS_HREDRAW">2</int-declare>
<int-declare name="COLOR_WINDOW">5</int-declare>
<int-declare name="IDC_ARROW">32512</int-declare>
<int-declare name="CW_USEDEFAULT">0x80000000</int-declare>
<int-declare name="WS_OVERLAPPED">0</int-declare>
<int-declare name="WS_CAPTION">0xc00000</int-declare>
<int-declare name="WS_SYSMENU">0x80000</int-declare>
<int-declare name="WS_THICKFRAME">0x40000</int-declare>
<int-declare name="WS_MINIMIZEBOX">0x20000</int-declare>
<int-declare name="WS_MAXIMIZEBOX">0x10000</int-declare>
<var-declare name="WS_OVERLAPPEDWINDOW">
	<or>
		<int name="WS_OVERLAPPED" />
		<int name="WS_CAPTION" />
		<int name="WS_SYSMENU" />
		<int name="WS_THICKFRAME" />
		<int name="WS_MINIMIZEBOX" />
		<int name="WS_MAXIMIZEBOX" />
	</or>
</var-declare>
<int-declare name="SW_SHOWNORMAL">1</int-declare>
<int-declare name="WM_DESTROY">2</int-declare>

<var-declare name="hInstance">
	<call name="GetModuleHandle" />
</var-declare>

<struct-define name="WNDCLASSEX">
	<member name="cbSize" />
	<member name="style" />
	<member name="lpfnWndProc" />
	<member name="cbClsExtra" />
	<member name="cbWndExtra" />
	<member name="hInstance" />
	<member name="hIcon" />
	<member name="hCursor" />
	<member name="hbrBackground" />
	<member name="lpszMenuName" />
	<member name="lpszClassName" />
	<member name="hIconSm" />
</struct-define>

<struct-define name="POINT">
	<member name="x" />
	<member name="y" />
</struct-define>

<struct-define name="MSG">
	<member name="hwnd" />
	<member name="message" />
	<member name="wParam" />
	<member name="lParam" />
	<member name="time" />
	<member name="pt" type="POINT" />
</struct-define>

<function name="MainLoop">
	<struct-declare name="msg" type="MSG" />
	<while>
		<cond>
			<call name="GetMessage">
				<ptr name="msg" />
				<null />
				<int>0</int>
				<int>0</int>
			</call>
		</cond>
		<block>
			<call name="TranslateMessage">
				<ptr name="msg" />
			</call>
			<call name="DispatchMessage">
				<ptr name="msg" />
			</call>
		</block>
	</while>
</function>

</llpml>
