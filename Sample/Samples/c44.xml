<?xml version="1.0" encoding="utf-8" ?>
<llpml version="1.0">

<title>クイックソート</title>

<include src="finish.xml" />
<include src="ArrayList.xml" />
<include src="jit.xml" />

<?llp
ArrayList a;
a.Add(53);
a.Add(12);
a.Add(90);
a.Add(34);
a.Add(15);
a.Add(3);
a.Add(25);

ArrayList b;
b |< a.QuickSort;

a |> Show;
b |> Show;

function QuickSort(src : ArrayList, dest : ArrayList)
{
  if (src.Count == 0) return;
  
  var x = src.Ptr[0];
  ArrayList lt, ge;
  lt |< src.FindPartial(1, \n => n <  x);
  ge |< src.FindPartial(1, \n => n >= x);
  dest |< lt.QuickSort;
  dest |< Add(x);
  dest |< ge.QuickSort;
}

function Show(list : ArrayList)
{
  list.ForEachWithOrder(\(n, i) =>
  {
    if (i > 0) printf(", ");
    printf("%d", n);
  });
  println();
}
?>

</llpml>
