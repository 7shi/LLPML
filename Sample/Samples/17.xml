<?xml version="1.0" encoding="utf-8" ?>
<llpml version="0.9.20080127" subsystem="WINDOWS_GUI">

<!-- window -->

<include src="win32.xml" />

<?llpml
const string className = "LLPML Test Window";

var hInstance = GetModuleHandle();

WNDCLASSEX wcex =
{
  /* cbSize        */ sizeof(WNDCLASSEX),
  /* style         */ CS_VREDRAW | CS_HREDRAW,
  /* lpfnWndProc   */ addrof(WndProc),
  /* cbClsExtra    */ 0,
  /* cbWndExtra    */ 0,
  /* hInstance     */ hInstance,
  /* hIcon         */ null,
  /* hCursor       */ LoadCursor(null, IDC_ARROW),
  /* hbrBackground */ COLOR_WINDOW + 1,
  /* lpszMenuName  */ null,
  /* lpszClassName */ className,
  /* hIconSm       */ null
};
RegisterClassEx(wcex);

var hWnd = CreateWindowEx(
  /* dwExStyle    */ 0,
  /* lpClassName  */ className,
  /* lpWindowName */ "テスト",
  /* dwStyle      */ WS_OVERLAPPEDWINDOW,
  /* X            */ CW_USEDEFAULT,
  /* Y            */ 0,
  /* nWidth       */ 256,
  /* nHeight      */ 256,
  /* hWndParent   */ null,
  /* hMenu        */ null,
  /* hInstance    */ hInstance,
  /* lpParam      */ null
);
ShowWindow(hWnd, SW_SHOWNORMAL);
UpdateWindow(hWnd);

MSG msg;
while (GetMessage(msg, null, 0, 0))
{
  TranslateMessage(msg);
  DispatchMessage(msg);
}

DestroyWindow(hWnd);

function __stdcall WndProc(hWnd, msg, wParam, lParam)
{
  switch (msg)
  {
    case WM_DESTROY:
      PostQuitMessage(0);
      return 0;
  }
  return DefWindowProc(hWnd, msg, wParam, lParam);
}
?>

</llpml>
